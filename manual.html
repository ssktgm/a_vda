<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>配車調整アプリ - 利用マニュアル</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
            line-height: 1.7;
        }
        h1, h2, h3 {
            font-weight: 700;
        }
        section {
            margin-bottom: 2.5rem;
        }
        li {
            margin-bottom: 0.5rem;
        }
        .container {
            max-width: 800px;
        }
        .code-snippet {
            background-color: #f3f4f6; /* gray-100 */
            padding: 0.5rem 1rem;
            border-radius: 0.5rem; /* rounded-lg */
            font-family: monospace;
            border: 1px solid #e5e7eb; /* gray-200 */
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 p-6 md:p-10">

    <div class="container mx-auto bg-white p-8 md:p-12 rounded-lg shadow-lg">

        <header class="border-b pb-4 mb-8">
            <h1 class="text-4xl font-bold text-gray-900">配車調整アプリ</h1>
            <p class="text-xl text-gray-600 mt-2">かんたん利用マニュアル</p>
        </header>

        <main>
            <section>
                <h2 class="text-2xl font-semibold text-gray-700 mb-3 border-l-4 border-blue-500 pl-2">1. このアプリについて</h2>
                <p>
                    このアプリは、少年サッカーチームなどの遠征や試合で、「誰がどの車に乗るか」の割り当て（配車）を簡単にするためのツールです。
                </p>
                <p class="mt-2">
                    面倒な配車調整を自動で行い、LINEや連絡網ですぐに共有できるテキストを作成できます。
                </p>
            </section>

            <section>
                <h2 class="text-2xl font-semibold text-gray-700 mb-3 border-l-4 border-blue-500 pl-2">2. 準備（選手と車の登録）</h2>
                <p>
                    試合のたびに選手名を入力するのは大変です。最初に「選手名簿」と「いつも出せる車」を登録しておきましょう。<br>
                    この作業は、PCが得意な代表者の方などが一度行えばOKです。
                </p>
                <ol class="list-decimal list-inside space-y-3 mt-4 pl-4">
                    <li>
                        メイン画面の「データ操作」にある<strong class="text-purple-700">「マスターデータ管理 (選手名簿・車リスト)」</strong>ボタンを押します。
                    </li>
                    <li>
                        「家族と参加者データ」で、選手や保護者の情報を登録します。<br>
                        <strong class="text-blue-600">＜同乗優先＞</strong>というチェックは、<strong>選手や、一緒に連れて行く兄弟</strong>に入れてください。ここにチェックを入れると、自動割り当ての際に「同じ学年」や「同じ学校」の子がなるべく同じ車に集まるようになります。保護者やコーチはチェック不要です。
                    </li>
                    <li>
                        「車データ」で、チームで出せる車を登録します。定員は「乗れる人数（ドライバー抜き）」ではなく、「<strong>車検証に書いてある乗車定員（7人乗りなど）</strong>」を入力してください。
                    </li>
                    <li>
                        登録が終わったら、左上の「&larr; 配車調整アプリに戻る」を押します。登録した内容は、お使いのブラウザ（Chromeなど）に記憶されます。
                    </li>
                </ol>
            </section>

            <section>
                <h2 class="text-2xl font-semibold text-gray-700 mb-3 border-l-4 border-blue-500 pl-2">3. 基本的な使い方（試合当日）</h2>
                <p>
                    毎回の配車調整は、この手順で行います。
                </p>
                <ol class="list-decimal list-inside space-y-3 mt-4 pl-4">
                    <li>
                        <strong>参加者を選ぶ</strong>：「1. 参加者を選択」で、その日に参加する人（選手、保護者、コーチ）のチェックボックスにチェックを入れます。
                    </li>
                    <li>
                        <strong>車を選ぶ</strong>：「2. 車とドライバーを選択」で、その日に出してもらう車にチェックを入れ、誰が運転するか（ドライバー）をリストから選びます。
                    </li>
                    <li>
                        <strong>別行動の人を外す</strong>：「3. 別便の人を除外」で、参加はするけれど車には乗らない人（自転車で行く、現地で合流する、など）にチェックを入れます。
                    </li>
                    <li>
                        <strong>会場の情報を入れる</strong>：「4. 駐車場と割り当て実行」で、<strong>「グラウンド名」</strong>（例: 高柳、逆井Gなど）や、指定駐車場の名前、備考（地図URLなど）を入力します。
                    </li>
                    <li>
                        <strong>自動割り当て</strong>：「割り当て実行」ボタンを押します。
                    </li>
                    <li>
                        <strong>結果の確認と手直し</strong>：「5. 割り当て結果」に、車ごとの割り当て結果が表示されます。<br>
                        もし「AくんとBくんは同じ車がいい」「Cさんを荷物車に移したい」といった調整が必要な場合は、<strong>入れ替えたい2人（または空席）のチェックボックスを順番にカチ、カチと押す</strong>と、2人の場所が入れ替わります。（車ごと入れ替える場合は、車名の横のチェックボックスを使います）
                    </li>
                    <li>
                        <strong>連絡網にコピー</strong>：結果が完成したら、「テキスト出力」ボタンを押し、表示されたテキストを「コピー」ボタンでコピーして、LINEやメールに貼り付けて連絡します。
                    </li>
                </ol>
            </section>

            <section>
                <h2 class="text-2xl font-semibold text-gray-700 mb-3 border-l-4 border-blue-500 pl-2">4. 便利な機能</h2>
                <ul class="list-disc list-inside ml-4 space-y-3">
                    <li>
                        <strong>今の作業を覚えておきたい</strong><br>
                        「データ操作」エリアの<strong class="text-blue-700">「現在の状態をDBに保存」</strong>ボタンを押すと、「誰が参加で、どの車に乗っているか」という今の作業状態を、お使いのブラウザに5件まで覚えておけます。「4/1 SF遠征」など分かりやすい名前を付けて保存してください。
                    </li>
                    <li>
                        <strong>前の状態に戻したい</strong><br>
                        保存した状態は、隣のドロップダウンリストから選び、「復元」ボタンでいつでも呼び出せます。「削除」ボタンで不要なデータを消すこともできます。
                    </li>
                    <li>
                        <strong>会場の情報を覚えておきたい</strong><br>
                        「4. 駐車場」で入力した会場の情報を「保存」ボタンで覚えておけます（20件まで）。次回同じ会場に行くときに、ドロップダウンから選ぶだけで情報が入力されます。
                    </li>
                </ul>
            </section>

            <section>
                <h2 class="text-2xl font-semibold text-gray-700 mb-3 border-l-4 border-blue-500 pl-2">5. データ管理とトラブル対処</h2>
                <h3 class="text-lg font-medium mt-4 mb-2">スマホのホーム画面に置く方法</h3>
                <p>
                    このアプリは、スマホのホーム画面にアプリアイコンのように置くことができます。<br>
                    お使いのブラウザ（SafariやChrome）の「共有」メニューから<strong class="text-blue-600">「ホーム画面に追加」</strong>を探して実行してください。
                </p>

                <h3 class="text-lg font-medium mt-4 mb-2">データのバックアップ (PCが得意な人向け)</h3>
                <p>
                    「マスターデータ管理」ページにある<strong class="text-green-700">「マスターを保存 (JSON)」</strong>ボタンを押すと、登録した「選手名簿」「車リスト」「会場リスト」を、PCにバックアップファイルとして保存できます。
                </p>
                <ul class="list-disc list-inside ml-4 space-y-1">
                    <li>PCを買い替えた時に、このファイルを「マスターを読み込む (JSON)」で読み込ませれば、データを引っ越しできます。</li>
                    <li>他のPCや、他のコーチとデータを共有したい場合にも使えます。</li>
                </ul>

                <h3 class="text-lg font-medium mt-4 mb-2">困ったときは (リセットボタン)</h3>
                <p>
                    「動きがおかしい」「データが正しく表示されない」といった問題が起きた場合、メイン画面の「データ操作」にある<strong class="text-red-700">「キャッシュ全クリア (DB初期化)」</strong>ボタンを押してください。
                </p>
                <p class="font-semibold text-red-600">
                    ※注意: このボタンを押すと、ブラウザに記憶させた「選手名簿」「車リスト」「保存した状態」「会場リスト」がすべて消え、完全に初期状態に戻ります。
                </p>
                <p>
                    リセット後、もしバックアップファイル（JSONファイル）があれば、それを「マスターデータ管理」ページで読み込むことで、名簿や車、会場の情報を元に戻すことができます。
                </p>
            </section>

        </main>
    </div>

</body>
</html>

