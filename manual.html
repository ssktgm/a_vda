<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>配車調整アプリ - 利用マニュアル</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans p-4 md:p-8">
    <div class="container mx-auto max-w-3xl bg-white p-6 md:p-10 rounded-lg shadow">
        
        <div class="flex justify-between items-center mb-6 border-b pb-2">
            <h1 class="text-3xl font-bold text-gray-800">利用マニュアル</h1>
            <a href="./index.html" class="text-sm bg-blue-600 hover:bg-blue-700 text-white font-bold py-1 px-3 rounded-lg shadow transition duration-200">
                &larr; アプリに戻る
            </a>
        </div>

        <div class="space-y-6">
            <section>
                <h2 class="text-2xl font-semibold text-gray-700 mb-3 border-l-4 border-blue-500 pl-2">1. 基本的な使い方</h2>
                <ol class="list-decimal list-inside space-y-2">
                    <li><strong>マスターデータ管理 (初回のみ)</strong>: 最初に「マスターデータ管理」ページで、選手や車、家族の情報を登録します。</li>
                    <li><strong>参加者を選択</strong>: 「1. 参加者を選択」で、その日に参加するすべての人（選手、保護者、兄弟など）にチェックを入れます。</li>
                    <li><strong>車とドライバーを選択</strong>: 「2. 車とドライバーを選択」で、その日に使用する車にチェックを入れ、対応するドライバーを選択します。「荷物あり」にチェックすると、その車の定員が自動的に2名（ドライバー含む）に設定されます。</li>
                    <li><strong>別便の人を除外</strong>: 「3. 別便の人を除外」で、参加はするが配車対象外の人（現地集合、自転車、別チームの車など）にチェックを入れます。</li>
                    <li><strong>駐車場情報を入力</strong>: 「4. 駐車場と割り当て実行」で、駐車場の名前や台数制限、備考（地図URLなど）を入力します。</li>
                    <li><strong>割り当て実行</strong>: 「割り当て実行」ボタンを押します。</li>
                    <li><strong>結果の確認と調整</strong>: 「5. 割り当て結果」に自動で割り当てられた結果が表示されます。</li>
                </ol>
            </section>

            <section>
                <h2 class="text-2xl font-semibold text-gray-700 mb-3 border-l-4 border-blue-500 pl-2">2. 割り当て結果の調整方法</h2>
                <p>自動割り当て後、結果を手動で調整できます。<strong>2つのチェックボックス</strong>を使って入れ替えを行います。</p>
                
                <h3 class="text-lg font-medium mt-4 mb-2">A. 人（座席）の入れ替え</h3>
                <ol class="list-decimal list-inside space-y-1">
                    <li>入れ替えたい1人目（例：Aさん）のチェックボックスをクリックします。（背景が青くなります）</li>
                    <li>入れ替えたい2人目（例：Bさん、または「空席」）のチェックボックスをクリックします。</li>
                    <li>AさんとBさん（または空席）が自動で入れ替わります。</li>
                    <li>ドライバー（[D]）と乗客、または別便の人とも入れ替え可能です。</li>
                </ol>

                <h3 class="text-lg font-medium mt-4 mb-2">B. 車の入れ替え</h3>
                 <ol class="list-decimal list-inside space-y-1">
                    <li>入れ替えたい1台目（例：小高カー）の<strong>車名の横</strong>にあるチェックボックスをクリックします。（ヘッダーが青くなります）</li>
                    <li>入れ替えたい2台目（例：難波カー）の<strong>車名の横</strong>にあるチェックボックスをクリックします。</li>
                    <li>2台が入れ替わります。</li>
                    <li><strong>同じ駐車場内</strong>で入れ替えた場合は「順序」が入れ替わります。</li>
                    <li><strong>違う駐車場間</strong>で入れ替えた場合は「駐車場（指定/指定外）」が入れ替わります。</li>
                </ol>
                <p class="text-sm text-red-600 mt-2"><strong>注意:</strong> 「人と車」を同時に選択して入れ替えることはできません。</p>
            </section>

            <section>
                <h2 class="text-2xl font-semibold text-gray-700 mb-3 border-l-4 border-blue-500 pl-2">3. データの保存と読み込み</h2>
                <h3 class="text-lg font-medium mt-4 mb-2">状態の保存 (JSON)</h3>
                <p>「今、誰が参加で、どの車が選択されていて、割り当て結果がどうなっているか」という**現在の作業状態**をJSONファイルとして保存します。次回、このファイルを読み込むと、作業を再開できます。</p>

                <h3 class="text-lg font-medium mt-4 mb-2">マスターデータ管理</h3>
                <p>「マスターデータ管理」ページでは、選手名簿や車リスト（マスターデータ）自体を編集できます。編集した内容は自動でブラウザ（IndexedDB）に保存されます。</p>
                <p class="font-semibold text-blue-700">このページで「▲ 上へ」「▼ 下へ」ボタンを使うと、メインページの「1. 参加者を選択」に表示される家族の順序を並べ替えることができます。</p>
                <p>このページにある「マスターを保存 (JSON)」は、名簿や車リスト自体をPCにバックアップしたい場合に使用します。「マスターを読み込む (JSON)」は、バックアップから復元したり、別のPCとデータを同期したりする場合に使用します（読み込むと現在のDBは上書きされます）。</p>
            </section>

            <section>
                <h2 class="text-2xl font-semibold text-gray-700 mb-3 border-l-4 border-blue-500 pl-2">4. PWA (スマホアプリ化)</h2>
                <p>このアプリはPWAに対応しています。スマホのブラウザ（SafariやChrome）でこのページを開き、メニューから「ホーム画面に追加」を選択すると、アプリアイコンが作成されます。</p>
                <p>ホーム画面のアイコンから起動すると、アドレスバーのない全画面表示になり、オフライン（電波がない場所）でもアプリを起動・利用できます。</p>
            </section>
        </div>

    </div>
</body>
</html>

